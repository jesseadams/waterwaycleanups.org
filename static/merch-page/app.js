var u=(t,e)=>()=>(t&&(e=t(t=0)),e);var Q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var w,N=u(()=>{w=[{id:"prod_T1FEbGaQbHYlEl",name:"Upcycled T-Shirt - Large",price:30,currency:"USD",stripePriceId:"price_1S5Cjt3IH8C7AKmurg5DAnls",description:"",images:["https://files.stripe.com/links/MDB8YWNjdF8xUzVCdkkzSUg4QzdBS211fGZsX3Rlc3RfaVR6amY0dzg1RVI0djNxWEtnd3NRSEt600Q0jbW0Os"]}]});import{useState as W}from"react";import{jsx as b,jsxs as h}from"react/jsx-runtime";var z,I,P=u(()=>{z=({product:t,addToCart:e})=>{let[r,a]=W(0),n=()=>{e(t,1)};return h("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden flex flex-col transition-transform duration-300 hover:scale-105",children:[h("div",{className:"relative",children:[b("img",{src:t.images[r],alt:`${t.name} - view ${r+1}`,className:"w-full h-80 object-cover"}),t.images.length>1&&b("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2",children:t.images.map((c,o)=>b("button",{onClick:()=>a(o),className:`h-2 w-2 rounded-full transition-colors ${r===o?"bg-white":"bg-white/50 hover:bg-white"}`,"aria-label":`View image ${o+1}`},o))})]}),h("div",{className:"p-6 flex flex-col flex-grow",children:[b("h3",{className:"text-xl font-bold text-gray-900",children:t.name}),b("p",{className:"text-lg font-semibold text-brand-teal mt-1",children:new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency}).format(t.price)}),b("p",{className:"text-gray-600 mt-2 flex-grow",children:t.description}),b("button",{onClick:n,className:"mt-4 w-full bg-brand-blue text-white font-bold py-2 px-4 rounded-md hover:bg-opacity-90 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-blue",children:"Add to Cart"})]})]})},I=z});import{jsx as C,jsxs as j}from"react/jsx-runtime";var D,S,k=u(()=>{N();P();D=({addToCart:t})=>j("div",{children:[C("h2",{className:"text-3xl font-bold text-gray-900 mb-6 text-center",children:"Our Gear"}),C("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:w.map(e=>C(I,{product:e,addToCart:t},e.id))})]}),S=D});import{jsx as p,jsxs as y}from"react/jsx-runtime";var V,E,R=u(()=>{V=({item:t,onRemove:e,onUpdateQuantity:r})=>{let a=o=>{let s=parseInt(o.target.value,10);!isNaN(s)&&s>0&&r(t.id,s)},n=()=>r(t.id,t.quantity+1),c=()=>{t.quantity>1?r(t.id,t.quantity-1):e(t.id)};return y("div",{className:"flex items-center space-x-4 border-b pb-4",children:[p("img",{src:t.images[0],alt:t.name,className:"w-20 h-20 object-cover rounded-md"}),y("div",{className:"flex-grow",children:[p("h4",{className:"font-bold",children:t.name}),p("p",{className:"text-sm text-gray-600",children:new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency}).format(t.price)}),y("div",{className:"flex items-center mt-2",children:[p("button",{onClick:c,className:"w-6 h-6 border rounded-l-md",children:"-"}),p("input",{type:"number",value:t.quantity,onChange:a,className:"w-10 h-6 text-center border-t border-b",min:"1"}),p("button",{onClick:n,className:"w-6 h-6 border rounded-r-md",children:"+"})]})]}),y("div",{className:"text-right",children:[p("p",{className:"font-bold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:t.currency}).format(t.price*t.quantity)}),p("button",{onClick:()=>e(t.id),className:"text-sm text-red-500 hover:underline mt-1",children:"Remove"})]})]})},E=V});import{jsx as L}from"react/jsx-runtime";var G,T,U=u(()=>{G=()=>L("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:L("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),T=G});import{loadStripe as X}from"@stripe/stripe-js";var v,Z,_,B=u(()=>{v=window.STRIPE_PUBLISHABLE_KEY||"";v.startsWith("pk_")||console.error("Stripe publishable key is not set or is invalid. Please set window.STRIPE_PUBLISHABLE_KEY in your HTML file.");Z=X(v),_=async t=>{let e=await Z;if(!e){console.error("Stripe.js has not loaded yet."),alert("Error: Payment system is not available. Please try again later.");return}if(!v.startsWith("pk_")){console.error("Stripe publishable key is not defined or invalid. Please set window.STRIPE_PUBLISHABLE_KEY in your HTML file."),alert("Error: Payment system is not configured. Please contact support.");return}let r=t.map(n=>({price:n.stripePriceId,quantity:n.quantity})),{error:a}=await e.redirectToCheckout({lineItems:r,mode:"payment",successUrl:`${window.location.origin}?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:window.location.origin});a&&(console.error("Stripe checkout error:",a),alert(`An error occurred during checkout: ${a.message}`))}});import J,{useEffect as tt,useMemo as et}from"react";import{Fragment as F,jsx as i,jsxs as f}from"react/jsx-runtime";var rt,q,A=u(()=>{R();U();B();rt=({isOpen:t,onClose:e,items:r,removeFromCart:a,updateQuantity:n})=>{let[c,o]=J.useState(!1);tt(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]);let s=et(()=>r.reduce((d,m)=>d+m.price*m.quantity,0),[r]),l=async()=>{o(!0),await _(r),o(!1)};return f(F,{children:[i("div",{className:`fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:e,"aria-hidden":"true"}),i("div",{className:`fixed top-0 right-0 h-full w-full max-w-md bg-white shadow-2xl z-50 transform transition-transform duration-300 ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:f("div",{className:"flex flex-col h-full",children:[f("div",{className:"flex justify-between items-center p-6 border-b",children:[i("h2",{id:"cart-heading",className:"text-2xl font-bold text-brand-blue",children:"Shopping Cart"}),f("button",{onClick:e,className:"text-gray-500 hover:text-gray-800 transition-colors",children:[i(T,{}),i("span",{className:"sr-only",children:"Close cart"})]})]}),r.length===0?f("div",{className:"flex-grow flex flex-col justify-center items-center text-center p-6",children:[i("p",{className:"text-gray-600 text-lg",children:"Your cart is empty."}),i("button",{onClick:e,className:"mt-4 text-brand-teal font-semibold hover:underline",children:"Continue Shopping"})]}):f(F,{children:[i("div",{className:"flex-grow overflow-y-auto p-6 space-y-4",children:r.map(d=>i(E,{item:d,onRemove:a,onUpdateQuantity:n},d.id))}),f("div",{className:"p-6 border-t space-y-4",children:[f("div",{className:"flex justify-between font-bold text-lg",children:[i("span",{children:"Subtotal"}),i("span",{children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(s)})]}),i("button",{onClick:l,disabled:c,className:"w-full bg-brand-blue text-white font-bold py-3 px-4 rounded-md hover:bg-opacity-90 transition-colors duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed",children:c?"Processing...":"Proceed to Checkout"})]})]})]})})]})},q=rt});import{useState as ot,useCallback as g}from"react";var H,M=u(()=>{H=()=>{let[t,e]=ot([]),r=g((o,s)=>{e(l=>l.find(m=>m.id===o.id)?l.map(m=>m.id===o.id?{...m,quantity:m.quantity+s}:m):[...l,{...o,quantity:s}])},[]),a=g(o=>{e(s=>s.filter(l=>l.id!==o))},[]),n=g((o,s)=>{if(s<=0){a(o);return}e(l=>l.map(d=>d.id===o?{...d,quantity:s}:d))},[a]),c=g(()=>{e([])},[]);return{items:t,addToCart:r,removeFromCart:a,updateQuantity:n,clearCart:c}}});import{useState as at,useEffect as nt}from"react";import{jsx as x,jsxs as it}from"react/jsx-runtime";var st,O,Y=u(()=>{k();A();M();st=()=>{let[t,e]=at(!1),r=H();return nt(()=>{let a=document.getElementById("header-cart-btn"),n=document.getElementById("cart-count");if(a){let c=()=>e(!0);return a.addEventListener("click",c),n&&(n.textContent=r.items.length.toString(),r.items.length>0?n.classList.remove("hidden"):n.classList.add("hidden")),()=>{a.removeEventListener("click",c)}}},[r.items.length]),it("div",{className:"font-sans antialiased text-gray-800",children:[x("main",{children:x(S,{addToCart:r.addToCart})}),x(q,{isOpen:t,onClose:()=>e(!1),...r})]})},O=st});import ct from"react";import lt from"react-dom/client";import{jsx as $}from"react/jsx-runtime";var mt=Q(()=>{Y();var K=document.getElementById("merch-root");if(!K)throw new Error("Could not find root element to mount to");var dt=lt.createRoot(K);dt.render($(ct.StrictMode,{children:$(O,{})}))});export default mt();
